# Supabase 数据库设置

## 你的 Supabase 配置

✅ **环境变量已配置：**
- Project URL: `https://qzmoulokbcyqunfpwwbw.supabase.co`
- Anon Key: 已配置

## 下一步：设置数据库

### 1. 打开 Supabase SQL Editor

1. 访问你的 Supabase Dashboard: https://supabase.com/dashboard
2. 选择你的项目
3. 点击左侧菜单的 **SQL Editor**
4. 点击 **New query**

### 2. 运行数据库设置脚本

复制下面的 SQL 代码，粘贴到 SQL Editor 中，然后点击 **Run**：

```sql
-- Choose For Me 数据库设置
-- 在 Supabase SQL Editor 中运行此脚本

-- 创建 choices 表
CREATE TABLE IF NOT EXISTS choices (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  question TEXT NOT NULL,
  type TEXT NOT NULL CHECK (type IN ('wheel', 'dice', 'card')),
  options JSONB NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  user_id TEXT DEFAULT 'anonymous'
);

-- 创建索引以提高查询性能
CREATE INDEX IF NOT EXISTS idx_choices_user_id ON choices(user_id);
CREATE INDEX IF NOT EXISTS idx_choices_created_at ON choices(created_at DESC);

-- 启用 Row Level Security (RLS)
ALTER TABLE choices ENABLE ROW LEVEL SECURITY;

-- 创建策略：允许所有人读取和插入（MVP阶段）
CREATE POLICY "Allow all operations for anonymous users"
  ON choices
  FOR ALL
  USING (true)
  WITH CHECK (true);
```

### 3. 验证设置

运行 SQL 后，你应该看到：
- ✅ Success. No rows returned

然后检查：
1. 点击左侧菜单的 **Table Editor**
2. 你应该能看到 `choices` 表
3. 表应该包含以下列：
   - id
   - question
   - type
   - options
   - created_at
   - user_id

## 完成！

数据库设置完成后，你就可以：
1. 启动开发服务器：`npm run dev`
2. 开始使用应用了！



