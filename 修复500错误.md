# 🔧 修复 500 Internal Server Error

## 已修复的问题

1. ✅ **layout.tsx** - 移除了手动添加的 `<head>` 标签（Next.js App Router 不支持）
2. ✅ **清理了 .next 缓存** - 确保重新编译

## 下一步操作

### 1. 停止并重启开发服务器

```bash
# 停止当前服务器 (Ctrl+C)
# 然后重新启动
npm run dev
```

### 2. 等待编译完成

你应该在终端看到：
```
▲ Next.js 14.0.4
- Local:        http://localhost:3000
- Ready in X.Xs
```

### 3. 硬刷新浏览器

- Mac: `Cmd + Shift + R`
- Windows: `Ctrl + Shift + R`

或者：
- 打开开发者工具 (F12)
- 右键点击刷新按钮
- 选择"清空缓存并硬性重新加载"

## 如果仍然有 500 错误

### 检查终端错误信息

查看运行 `npm run dev` 的终端，应该会显示具体的错误信息，例如：
- 编译错误
- 模块找不到
- 语法错误

### 常见问题

#### 问题 1: 环境变量未设置

如果看到 Supabase 相关错误，检查 `.env.local` 文件：

```bash
cat .env.local
```

应该包含：
```
NEXT_PUBLIC_SUPABASE_URL=https://qzmoulokbcyqunfpwwbw.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=你的key
```

#### 问题 2: 依赖问题

```bash
rm -rf node_modules package-lock.json .next
npm install
npm run dev
```

#### 问题 3: TypeScript 错误

检查是否有类型错误：
```bash
npm run build
```

## 验证修复

修复后，你应该看到：
- ✅ 浏览器正常显示页面内容
- ✅ Network 标签中所有请求返回 200 状态
- ✅ 控制台没有红色错误

## 如果问题仍然存在

请提供：
1. **终端中的完整错误信息**（复制粘贴）
2. **浏览器控制台的错误信息**（Console 标签）
3. **Network 标签的截图**（显示哪些请求失败）

这样我可以更准确地定位问题。



